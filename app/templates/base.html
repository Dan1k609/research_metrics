<!-- app/templates/base.html -->
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Научные публикации преподавателей{% endblock %}</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script defer src="{{ url_for('static', filename='js/script.js') }}"></script>
</head>
<body>
    <div class="header">
        <h1>Автоматизация учёта научных публикаций</h1>
        <div style="font-size:1.1em;margin-top:5px;">
            <b>ЧОУ ВО «Московский университет им. С.Ю. Витте»</b>
        </div>
    </div>

    <nav>
        {% if g.user %}
            <a href="{{ url_for('main.dashboard') }}">Дашборд</a>
        {% endif %}
        <a href="{{ url_for('main.profile') }}">Личный кабинет</a>
        <a href="{{ url_for('main.lecturers') }}">Преподаватели</a>
        <a href="{{ url_for('main.publications') }}">Публикации</a>
        <a href="{{ url_for('main.reports') }}">Отчёты</a>
        <a href="{{ url_for('main.news_list') }}">Новости</a>
        <a href="{{ url_for('main.faq') }}">FAQ</a>
        <a href="{{ url_for('main.feedback') }}">Обратная связь</a>
        {% if g.user and g.user['role'] == 'admin' %}
            <a href="{{ url_for('main.admin_feedback') }}">Обращения</a>
            <a href="{{ url_for('main.admin_news') }}">Упр. новостями</a>
            <a href="{{ url_for('main.log') }}">Журнал действий</a>
        {% endif %}
        <span style="margin-left:25px;color:#2067b2;">
            {% if g.user %}
                {{ g.user['fio']|default('Пользователь') }} ({{ g.user['role']|default('') }})
            {% endif %}
        </span>
        {% if g.user %}
            <a href="{{ url_for('main.logout') }}" style="margin-left:auto;color:#b21f1f;">Выйти</a>
        {% else %}
            <a href="{{ url_for('main.login') }}" style="margin-left:auto;color:#2067b2;">Войти</a>
        {% endif %}
    </nav>

    <div class="container">
        {% for message in get_flashed_messages() %}
            <div class="flash">{{ message }}</div>
        {% endfor %}

        {# Хлебные крошки: цепочка навигации, если переданы в шаблон #}
        {% if breadcrumbs %}
        <nav class="breadcrumbs" style="margin-bottom:10px; font-size:0.9em;">
            {% for bc in breadcrumbs %}
                {% if not loop.last %}
                    <a href="{{ bc.url }}">{{ bc.title }}</a> &raquo;
                {% else %}
                    <span>{{ bc.title }}</span>
                {% endif %}
            {% endfor %}
        </nav>
        {% endif %}

        {% block content %}{% endblock %}
    </div>

    <footer class="footer">
        Разработчик: студент ЧОУ ВО «МУ им. С.Ю. Витте»<br>
        <b>Мирошниченко Данила Романович</b>
    </footer>
</body>
</html>
